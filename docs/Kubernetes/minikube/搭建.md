# 1. å®‰è£…

```
https://minikube.sigs.k8s.io/docs/start/?arch=%2Fwindows%2Fx86-64%2Fstable%2F.exe+download
ä½¿ç”¨å®˜æ–¹å»ºè®®,ç›´æ¥ä¸‹è½½äºŒè¿›åˆ¶,å†ä¸Šä¼ å†å®‰è£…
```

# 2.æ‹‰å–é•œåƒ

### ç¬¬ä¸€æ­¥: å…ˆè¯•æ–¹æ¡ˆ1(æœ€ç®€å•)

bash

```bash
docker pull kicbase/stable:v0.0.47
docker tag kicbase/stable:v0.0.47 gcr.io/k8s-minikube/kicbase:v0.0.47
```

### ç¬¬äºŒæ­¥: éªŒè¯é•œåƒ

bash

```bash
docker images | grep kicbase
```

ä½ åº”è¯¥çœ‹åˆ°:

```
gcr.io/k8s-minikube/kicbase    v0.0.47    xxxxx    xxx MB
kicbase/stable                 v0.0.47    xxxxx    xxx MB
```

### ç¬¬ä¸‰æ­¥: å¯åŠ¨ Minikube

bash

```bash
minikube start \
  --force \
  --driver=docker \
  --cpus=2 \
  --memory=2200 \
  --kubernetes-version=v1.28.0
```

------

## å¤‡é€‰: ä½¿ç”¨æ›´æ–°çš„é•œåƒç‰ˆæœ¬

# 3. å¯åŠ¨

```
minikube start   --force   --driver=docker   --cpus=2   --memory=2200   --kubernetes-version=v1.28.0
ğŸ˜„  minikube v1.36.0 on Ubuntu 22.04 (hyperv/amd64)
â—  minikube skips various validations when --force is supplied; this may lead to unexpected behavior
ğŸ†•  Kubernetes 1.33.1 is now available. If you would like to upgrade, specify: --kubernetes-version=v1.33.1
âœ¨  Using the docker driver based on existing profile
ğŸ›‘  The "docker" driver should not be used with root privileges. If you wish to continue as root, use --force.
ğŸ’¡  If you are running minikube within a VM, consider using --driver=none:
ğŸ“˜    https://minikube.sigs.k8s.io/docs/reference/drivers/none/
ğŸ’¡  Tip: To remove this root owned cluster, run: sudo minikube delete
ğŸ‘  Starting "minikube" primary control-plane node in "minikube" cluster
ğŸšœ  Pulling base image v0.0.47 ...
ğŸƒ  Updating the running docker "minikube" container ...
    > kubectl.sha256:  64 B / 64 B [-------------------------] 100.00% ? p/s 0s
    > kubectl:  47.55 MiB / 47.55 MiB [----------] 100.00% 545.10 KiB p/s 1m30s

    â–ª Generating certificates and keys ...
    â–ª Booting up control plane ...
    â–ª Configuring RBAC rules ...
ğŸ”—  Configuring bridge CNI (Container Networking Interface) ...
ğŸ”  Verifying Kubernetes components...
    â–ª Using image registry.cn-hangzhou.aliyuncs.com/google_containers/storage-provisioner:v5
ğŸŒŸ  Enabled addons: storage-provisioner, default-storageclass

â—  /usr/local/bin/kubectl is version 1.31.0, which may have incompatibilities with Kubernetes 1.28.0.
    â–ª Want kubectl v1.28.0? Try 'minikube kubectl -- get pods -A'
ğŸ„  Done! kubectl is now configured to use "minikube" cluster and "default" namespace by default
root@4295tzsah:~# minikube status
minikube
type: Control Plane
host: Running
kubelet: Running
apiserver: Running
kubeconfig: Configured

root@4295tzsah:~# kubectl get nodes
NAME       STATUS   ROLES           AGE   VERSION
minikube   Ready    control-plane   61s   v1.28.0
root@4295tzsah:~# kubectl get pods -A
NAMESPACE     NAME                               READY   STATUS    RESTARTS      AGE
kube-system   coredns-6554b8b87f-h8kd5           1/1     Running   0             49s
kube-system   coredns-6554b8b87f-krmf5           1/1     Running   0             49s
kube-system   etcd-minikube                      1/1     Running   0             63s
kube-system   kube-apiserver-minikube            1/1     Running   0             63s
kube-system   kube-controller-manager-minikube   1/1     Running   0             64s
kube-system   kube-proxy-pkhw6                   1/1     Running   0             49s
kube-system   kube-scheduler-minikube            1/1     Running   0             63s
kube-system   storage-provisioner                1/1     Running   1 (17s ago)   61s
```

# 4. å¼€å§‹ä½ çš„ç¬¬ä¸€ä¸ª Kubernetes åº”ç”¨

## 4.1 å®éªŒ1: éƒ¨ç½² Nginx Web æœåŠ¡å™¨

```bash
# 1. åˆ›å»ºä¸€ä¸ª Nginx éƒ¨ç½²
kubectl create deployment nginx --image=nginx:alpine

# 2. æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
kubectl get deployments

# 3. æŸ¥çœ‹ Pod
kubectl get pods

# 4. æŸ¥çœ‹ Pod è¯¦ç»†ä¿¡æ¯
kubectl describe pod <pod-name>
```

### 4.1.1 ç”±äºé•œåƒæºåœ¨å›½å¤–,æ‰€ä»¥æ— æ³•æ‹‰å–

```
docker pull registry.cn-hangzhou.aliyuncs.com/library/nginx:alpine
Error response from daemon: pull access denied for registry.cn-hangzhou.aliyuncs.com/library/nginx, repository does not exist or may require 'docker login': denied: requested access to the resource is denied
```

### 4.1.2 è§£å†³æ–¹æ³•:

æ–¹æ¡ˆ1: ä½¿ç”¨ Docker Hub å®˜æ–¹é•œåƒ(é…ç½®åŠ é€Ÿ)

```
# å…ˆé…ç½®å®¿ä¸»æœºçš„ Docker é•œåƒåŠ é€Ÿ
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": [
    "https://docker.m.daocloud.io",
    "https://dockerhub.timeweb.cloud",
    "https://noohub.ru"
  ]
}
EOF

# é‡å¯ Docker
sudo systemctl daemon-reload
sudo systemctl restart docker

# æ‹‰å–å®˜æ–¹ Nginx é•œåƒ
docker pull nginx:alpine
```

### 4.1.3æ‹‰å–å®Œæˆåçš„æ“ä½œ

```bash
# 1. éªŒè¯é•œåƒå·²ä¸‹è½½
docker images | grep nginx

# 2. å°†é•œåƒåŠ è½½åˆ° Minikube
minikube image load nginx:alpine

# 3. éªŒè¯é•œåƒåœ¨ Minikube ä¸­
minikube image ls | grep nginx

# 4. åˆ é™¤ä¹‹å‰å¤±è´¥çš„éƒ¨ç½²
kubectl delete deployment nginx

# 5. é‡æ–°åˆ›å»ºéƒ¨ç½²
kubectl create deployment nginx --image=nginx:alpine

# 6. æŸ¥çœ‹ Pod çŠ¶æ€
kubectl get pods

# 7. å®æ—¶ç›‘æ§çŠ¶æ€å˜åŒ–
kubectl get pods -w
```

------

## âœ… æˆåŠŸçš„æ ‡å¿—

å½“ä½ çœ‹åˆ°ç±»ä¼¼è¾“å‡ºæ—¶,è¯´æ˜æˆåŠŸäº†:

```
minikube image load nginx:alpine
root@4295tzsah:~# minikube image ls | grep nginx
docker.io/library/nginx:alpine
root@4295tzsah:~# kubectl delete deployment nginx
deployment.apps "nginx" deleted
root@4295tzsah:~# kubectl create deployment nginx --image=nginx:alpine
deployment.apps/nginx created
root@4295tzsah:~# kubectl get nodes
NAME       STATUS   ROLES           AGE   VERSION
minikube   Ready    control-plane   22h   v1.28.0
```

## 

## 4.2 å®éªŒ2: æš´éœ²æœåŠ¡è®©å¤–éƒ¨è®¿é—®

bash

```bash
# 1. æš´éœ² Nginx æœåŠ¡
kubectl expose deployment nginx --port=80 --type=NodePort

# 2. è·å–è®¿é—®åœ°å€
minikube service nginx --url

# 3. è®¿é—®æµ‹è¯•(ä¼šæ˜¾ç¤º "Welcome to nginx!" é¡µé¢)
curl $(minikube service nginx --url)
```

è¾“å‡ºç»“æœ

```
curl $(minikube service nginx --url)
<!DOCTYPE html>
<html>
<head>
<title>Welcome to nginx!</title>
<style>
html { color-scheme: light dark; }
body { width: 35em; margin: 0 auto;
font-family: Tahoma, Verdana, Arial, sans-serif; }
</style>
</head>
<body>
<h1>Welcome to nginx!</h1>
<p>If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.</p>

<p>For online documentation and support please refer to
<a href="http://nginx.org/">nginx.org</a>.<br/>
Commercial support is available at
<a href="http://nginx.com/">nginx.com</a>.</p>

<p><em>Thank you for using nginx.</em></p>
</body>
</html>
```



## 4.3 å®éªŒ3: æ‰©å±•åº”ç”¨å‰¯æœ¬æ•°

```bash
# æ‰©å±•åˆ° 3 ä¸ªå‰¯æœ¬
kubectl scale deployment nginx --replicas=3

# æŸ¥çœ‹ Pod æ•°é‡å˜åŒ–
kubectl get pods -w
```

è¾“å‡ºç»“æœ

```bash
kubectl scale deployment nginx --replicas=3
deployment.apps/nginx scaled
root@4295tzsah:~# kubectl get pods -w
NAME                    READY   STATUS    RESTARTS   AGE
nginx-b4ccb96c6-cx8hc   1/1     Running   0          6m44s
nginx-b4ccb96c6-gs94c   1/1     Running   0          11s
nginx-b4ccb96c6-vczxc   1/1     Running   0          11s
```



------

# 5.ğŸ“Š å¯ç”¨ Dashboard(å¯è§†åŒ–ç®¡ç†ç•Œé¢)

bash

```bash
# å¯åŠ¨ Dashboard
minikube dashboard

# å¦‚æœæ˜¯è¿œç¨‹æœåŠ¡å™¨,ä½¿ç”¨åå°æ¨¡å¼å¹¶è·å– URL
minikube dashboard --url
```

## æ‹‰å–é•œåƒå‡ºé”™:

```
kubectl scale deployment nginx --replicas=3
deployment.apps/nginx scaled
root@4295tzsah:~# kubectl get pods -w
NAME                    READY   STATUS    RESTARTS   AGE
nginx-b4ccb96c6-cx8hc   1/1     Running   0          6m44s
nginx-b4ccb96c6-gs94c   1/1     Running   0          11s
nginx-b4ccb96c6-vczxc   1/1     Running   0          11s
^Croot@4295tzsah:~# ^C
root@4295tzsah:~# minikube dashboard
ğŸ”Œ  Enabling dashboard ...
    â–ª Using image docker.io/kubernetesui/dashboard:v2.7.0
    â–ª Using image docker.io/kubernetesui/metrics-scraper:v1.0.8
ğŸ’¡  Some dashboard features require the metrics-server addon. To enable all features please run:

        minikube addons enable metrics-server

ğŸ¤”  Verifying dashboard health ...
ğŸš€  Launching proxy ...
ğŸ¤”  Verifying proxy health ...

âŒ  Exiting due to SVC_URL_TIMEOUT: http://127.0.0.1:38629/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/ is not accessible: Temporary Error: unexpected response code: 503
```

## è§£å†³æ–¹æ³•

```
# 1. åœ¨å®¿ä¸»æœºæ‹‰å– Dashboard é•œåƒ(ä½¿ç”¨é•œåƒåŠ é€Ÿ)
docker pull kubernetesui/dashboard:v2.7.0
docker pull kubernetesui/metrics-scraper:v1.0.8

# 2. åŠ è½½åˆ° Minikube
minikube image load kubernetesui/dashboard:v2.7.0
minikube image load kubernetesui/metrics-scraper:v1.0.8

# 3. éªŒè¯é•œåƒå·²åŠ è½½
minikube image ls | grep kubernetes

# 4. é‡å¯ Dashboard
minikube addons disable dashboard
minikube addons enable dashboard

# 5. ç­‰å¾… Pod å°±ç»ª
kubectl get pods -n kubernetes-dashboard -w
```





# 6.ğŸ“ Kubernetes æ ¸å¿ƒæ¦‚å¿µé€Ÿè§ˆ

```
æ¦‚å¿µè¯´æ˜ç±»æ¯”
Podæœ€å°éƒ¨ç½²å•å…ƒ,åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä¸€é—´æˆ¿å­
Deploymentç®¡ç† Pod çš„å‰¯æœ¬å’Œæ›´æ–°æˆ¿åœ°äº§å¼€å‘å•†
Serviceä¸º Pod æä¾›ç¨³å®šçš„ç½‘ç»œè®¿é—®å…¥å£é—¨ç‰Œå·
Namespaceèµ„æºéš”ç¦»çš„è™šæ‹Ÿé›†ç¾¤å°åŒº
```

------

## ğŸ“ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨

bash

```bash
# æŸ¥çœ‹èµ„æº
kubectl get pods              # æŸ¥çœ‹ Pod
kubectl get deployments       # æŸ¥çœ‹éƒ¨ç½²
kubectl get services          # æŸ¥çœ‹æœåŠ¡
kubectl get all               # æŸ¥çœ‹æ‰€æœ‰èµ„æº

# è¯¦ç»†ä¿¡æ¯
kubectl describe pod <name>   # Pod è¯¦æƒ…
kubectl logs <pod-name>       # æŸ¥çœ‹æ—¥å¿—
kubectl logs -f <pod-name>    # å®æ—¶æŸ¥çœ‹æ—¥å¿—

# æ“ä½œèµ„æº
kubectl delete pod <name>     # åˆ é™¤ Pod
kubectl delete deployment <name>  # åˆ é™¤éƒ¨ç½²
kubectl exec -it <pod-name> -- /bin/sh  # è¿›å…¥å®¹å™¨

# é›†ç¾¤ç®¡ç†
minikube status               # é›†ç¾¤çŠ¶æ€
minikube stop                 # åœæ­¢é›†ç¾¤
minikube start                # å¯åŠ¨é›†ç¾¤
minikube delete               # åˆ é™¤é›†ç¾¤
```

------

## ğŸ¯ æ¥ä¸‹æ¥ä½ æƒ³å­¦ä»€ä¹ˆ?