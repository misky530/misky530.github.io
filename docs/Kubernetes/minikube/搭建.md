# 1. 安装

```
https://minikube.sigs.k8s.io/docs/start/?arch=%2Fwindows%2Fx86-64%2Fstable%2F.exe+download
使用官方建议,直接下载二进制,再上传再安装
```

# 2.拉取镜像

### 第一步: 先试方案1(最简单)

bash

```bash
docker pull kicbase/stable:v0.0.47
docker tag kicbase/stable:v0.0.47 gcr.io/k8s-minikube/kicbase:v0.0.47
```

### 第二步: 验证镜像

bash

```bash
docker images | grep kicbase
```

你应该看到:

```
gcr.io/k8s-minikube/kicbase    v0.0.47    xxxxx    xxx MB
kicbase/stable                 v0.0.47    xxxxx    xxx MB
```

### 第三步: 启动 Minikube

bash

```bash
minikube start \
  --force \
  --driver=docker \
  --cpus=2 \
  --memory=2200 \
  --kubernetes-version=v1.28.0
```

------

## 备选: 使用更新的镜像版本

# 3. 启动

```
minikube start   --force   --driver=docker   --cpus=2   --memory=2200   --kubernetes-version=v1.28.0
😄  minikube v1.36.0 on Ubuntu 22.04 (hyperv/amd64)
❗  minikube skips various validations when --force is supplied; this may lead to unexpected behavior
🆕  Kubernetes 1.33.1 is now available. If you would like to upgrade, specify: --kubernetes-version=v1.33.1
✨  Using the docker driver based on existing profile
🛑  The "docker" driver should not be used with root privileges. If you wish to continue as root, use --force.
💡  If you are running minikube within a VM, consider using --driver=none:
📘    https://minikube.sigs.k8s.io/docs/reference/drivers/none/
💡  Tip: To remove this root owned cluster, run: sudo minikube delete
👍  Starting "minikube" primary control-plane node in "minikube" cluster
🚜  Pulling base image v0.0.47 ...
🏃  Updating the running docker "minikube" container ...
    > kubectl.sha256:  64 B / 64 B [-------------------------] 100.00% ? p/s 0s
    > kubectl:  47.55 MiB / 47.55 MiB [----------] 100.00% 545.10 KiB p/s 1m30s

    ▪ Generating certificates and keys ...
    ▪ Booting up control plane ...
    ▪ Configuring RBAC rules ...
🔗  Configuring bridge CNI (Container Networking Interface) ...
🔎  Verifying Kubernetes components...
    ▪ Using image registry.cn-hangzhou.aliyuncs.com/google_containers/storage-provisioner:v5
🌟  Enabled addons: storage-provisioner, default-storageclass

❗  /usr/local/bin/kubectl is version 1.31.0, which may have incompatibilities with Kubernetes 1.28.0.
    ▪ Want kubectl v1.28.0? Try 'minikube kubectl -- get pods -A'
🏄  Done! kubectl is now configured to use "minikube" cluster and "default" namespace by default
root@4295tzsah:~# minikube status
minikube
type: Control Plane
host: Running
kubelet: Running
apiserver: Running
kubeconfig: Configured

root@4295tzsah:~# kubectl get nodes
NAME       STATUS   ROLES           AGE   VERSION
minikube   Ready    control-plane   61s   v1.28.0
root@4295tzsah:~# kubectl get pods -A
NAMESPACE     NAME                               READY   STATUS    RESTARTS      AGE
kube-system   coredns-6554b8b87f-h8kd5           1/1     Running   0             49s
kube-system   coredns-6554b8b87f-krmf5           1/1     Running   0             49s
kube-system   etcd-minikube                      1/1     Running   0             63s
kube-system   kube-apiserver-minikube            1/1     Running   0             63s
kube-system   kube-controller-manager-minikube   1/1     Running   0             64s
kube-system   kube-proxy-pkhw6                   1/1     Running   0             49s
kube-system   kube-scheduler-minikube            1/1     Running   0             63s
kube-system   storage-provisioner                1/1     Running   1 (17s ago)   61s
```

# 4. 开始你的第一个 Kubernetes 应用

## 4.1 实验1: 部署 Nginx Web 服务器

```bash
# 1. 创建一个 Nginx 部署
kubectl create deployment nginx --image=nginx:alpine

# 2. 查看部署状态
kubectl get deployments

# 3. 查看 Pod
kubectl get pods

# 4. 查看 Pod 详细信息
kubectl describe pod <pod-name>
```

### 4.1.1 由于镜像源在国外,所以无法拉取

```
docker pull registry.cn-hangzhou.aliyuncs.com/library/nginx:alpine
Error response from daemon: pull access denied for registry.cn-hangzhou.aliyuncs.com/library/nginx, repository does not exist or may require 'docker login': denied: requested access to the resource is denied
```

### 4.1.2 解决方法:

方案1: 使用 Docker Hub 官方镜像(配置加速)

```
# 先配置宿主机的 Docker 镜像加速
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": [
    "https://docker.m.daocloud.io",
    "https://dockerhub.timeweb.cloud",
    "https://noohub.ru"
  ]
}
EOF

# 重启 Docker
sudo systemctl daemon-reload
sudo systemctl restart docker

# 拉取官方 Nginx 镜像
docker pull nginx:alpine
```

### 4.1.3拉取完成后的操作

```bash
# 1. 验证镜像已下载
docker images | grep nginx

# 2. 将镜像加载到 Minikube
minikube image load nginx:alpine

# 3. 验证镜像在 Minikube 中
minikube image ls | grep nginx

# 4. 删除之前失败的部署
kubectl delete deployment nginx

# 5. 重新创建部署
kubectl create deployment nginx --image=nginx:alpine

# 6. 查看 Pod 状态
kubectl get pods

# 7. 实时监控状态变化
kubectl get pods -w
```

------

## ✅ 成功的标志

当你看到类似输出时,说明成功了:

```
minikube image load nginx:alpine
root@4295tzsah:~# minikube image ls | grep nginx
docker.io/library/nginx:alpine
root@4295tzsah:~# kubectl delete deployment nginx
deployment.apps "nginx" deleted
root@4295tzsah:~# kubectl create deployment nginx --image=nginx:alpine
deployment.apps/nginx created
root@4295tzsah:~# kubectl get nodes
NAME       STATUS   ROLES           AGE   VERSION
minikube   Ready    control-plane   22h   v1.28.0
```

## 

## 4.2 实验2: 暴露服务让外部访问

bash

```bash
# 1. 暴露 Nginx 服务
kubectl expose deployment nginx --port=80 --type=NodePort

# 2. 获取访问地址
minikube service nginx --url

# 3. 访问测试(会显示 "Welcome to nginx!" 页面)
curl $(minikube service nginx --url)
```

输出结果

```
curl $(minikube service nginx --url)
<!DOCTYPE html>
<html>
<head>
<title>Welcome to nginx!</title>
<style>
html { color-scheme: light dark; }
body { width: 35em; margin: 0 auto;
font-family: Tahoma, Verdana, Arial, sans-serif; }
</style>
</head>
<body>
<h1>Welcome to nginx!</h1>
<p>If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.</p>

<p>For online documentation and support please refer to
<a href="http://nginx.org/">nginx.org</a>.<br/>
Commercial support is available at
<a href="http://nginx.com/">nginx.com</a>.</p>

<p><em>Thank you for using nginx.</em></p>
</body>
</html>
```



## 4.3 实验3: 扩展应用副本数

```bash
# 扩展到 3 个副本
kubectl scale deployment nginx --replicas=3

# 查看 Pod 数量变化
kubectl get pods -w
```

输出结果

```bash
kubectl scale deployment nginx --replicas=3
deployment.apps/nginx scaled
root@4295tzsah:~# kubectl get pods -w
NAME                    READY   STATUS    RESTARTS   AGE
nginx-b4ccb96c6-cx8hc   1/1     Running   0          6m44s
nginx-b4ccb96c6-gs94c   1/1     Running   0          11s
nginx-b4ccb96c6-vczxc   1/1     Running   0          11s
```



------

# 5.📊 启用 Dashboard(可视化管理界面)

bash

```bash
# 启动 Dashboard
minikube dashboard

# 如果是远程服务器,使用后台模式并获取 URL
minikube dashboard --url
```

## 拉取镜像出错:

```
kubectl scale deployment nginx --replicas=3
deployment.apps/nginx scaled
root@4295tzsah:~# kubectl get pods -w
NAME                    READY   STATUS    RESTARTS   AGE
nginx-b4ccb96c6-cx8hc   1/1     Running   0          6m44s
nginx-b4ccb96c6-gs94c   1/1     Running   0          11s
nginx-b4ccb96c6-vczxc   1/1     Running   0          11s
^Croot@4295tzsah:~# ^C
root@4295tzsah:~# minikube dashboard
🔌  Enabling dashboard ...
    ▪ Using image docker.io/kubernetesui/dashboard:v2.7.0
    ▪ Using image docker.io/kubernetesui/metrics-scraper:v1.0.8
💡  Some dashboard features require the metrics-server addon. To enable all features please run:

        minikube addons enable metrics-server

🤔  Verifying dashboard health ...
🚀  Launching proxy ...
🤔  Verifying proxy health ...

❌  Exiting due to SVC_URL_TIMEOUT: http://127.0.0.1:38629/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/ is not accessible: Temporary Error: unexpected response code: 503
```

## 解决方法

```
# 1. 在宿主机拉取 Dashboard 镜像(使用镜像加速)
docker pull kubernetesui/dashboard:v2.7.0
docker pull kubernetesui/metrics-scraper:v1.0.8

# 2. 加载到 Minikube
minikube image load kubernetesui/dashboard:v2.7.0
minikube image load kubernetesui/metrics-scraper:v1.0.8

# 3. 验证镜像已加载
minikube image ls | grep kubernetes

# 4. 重启 Dashboard
minikube addons disable dashboard
minikube addons enable dashboard

# 5. 等待 Pod 就绪
kubectl get pods -n kubernetes-dashboard -w
```





# 6.🎓 Kubernetes 核心概念速览

```
概念说明类比
Pod最小部署单元,包含一个或多个容器一间房子
Deployment管理 Pod 的副本和更新房地产开发商
Service为 Pod 提供稳定的网络访问入口门牌号
Namespace资源隔离的虚拟集群小区
```

------

## 📝 常用命令速查表

bash

```bash
# 查看资源
kubectl get pods              # 查看 Pod
kubectl get deployments       # 查看部署
kubectl get services          # 查看服务
kubectl get all               # 查看所有资源

# 详细信息
kubectl describe pod <name>   # Pod 详情
kubectl logs <pod-name>       # 查看日志
kubectl logs -f <pod-name>    # 实时查看日志

# 操作资源
kubectl delete pod <name>     # 删除 Pod
kubectl delete deployment <name>  # 删除部署
kubectl exec -it <pod-name> -- /bin/sh  # 进入容器

# 集群管理
minikube status               # 集群状态
minikube stop                 # 停止集群
minikube start                # 启动集群
minikube delete               # 删除集群
```

------

## 🎯 接下来你想学什么?